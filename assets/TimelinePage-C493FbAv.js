import{r as m,R as T,j as e}from"./index-BtDuSHOe.js";import{r as v}from"./IR-Network-2ktbiwh_.js";import{m as y,s as _,v as $,c as M}from"./Tracker-SL_76LF4.js";import{T as k}from"./TwemojiText-CUsh35NJ.js";const D=({data:o})=>{const[a,x]=m.useState(null),d=T.useRef(null),n=(t,l)=>{d.current&&clearTimeout(d.current),x({...l,x:t.clientX,y:t.clientY})},i=()=>{d.current=setTimeout(()=>{x(null)},100)},u=()=>{d.current&&clearTimeout(d.current)},w=()=>{x(null)},{minTime:f,maxTime:g,items:h}=m.useMemo(()=>{if(!o||o.length===0)return{minTime:0,maxTime:0,items:[]};const t=o.map(s=>{const c=new Date(s.creation_date);return{...s,timestamp:c.getTime(),dateObj:c,yPos:20+Math.random()*60}}).sort((s,c)=>s.timestamp-c.timestamp),l=new Date("2007-01-01").getTime(),r=Date.now();return{minTime:l,maxTime:r,items:t}},[o]),N=m.useMemo(()=>{const t=[],r=new Date().getFullYear();for(let s=2007;s<=r;s++)t.push({year:s,timestamp:new Date(`${s}-01-01`).getTime()});return t},[]),p=t=>(t-f)/(g-f)*100;return h.length===0?null:e.jsxs("div",{className:"relative w-full h-[500px] bg-slate-900/50 rounded-xl border border-slate-800 p-4 select-none",children:[e.jsxs("svg",{className:"w-full h-full overflow-visible",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.2"}),e.jsx("stop",{offset:"50%",stopColor:"#3b82f6",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.2"})]})}),e.jsx("line",{x1:"0%",y1:"50%",x2:"100%",y2:"50%",stroke:"url(#lineGradient)",strokeWidth:"2"}),N.map(t=>{const l=p(t.timestamp);return e.jsxs("g",{children:[e.jsx("line",{x1:`${l}%`,y1:"48%",x2:`${l}%`,y2:"52%",stroke:"#475569",strokeWidth:"1"}),e.jsx("text",{x:`${l}%`,y:"95%",textAnchor:"middle",fill:"#64748b",fontSize:"10",className:"font-mono",children:t.year}),e.jsx("line",{x1:`${l}%`,y1:"0%",x2:`${l}%`,y2:"100%",stroke:"#1e293b",strokeWidth:"1",strokeDasharray:"4 4"})]},t.year)}),h.map((t,l)=>{const r=p(t.timestamp),s=a&&a.user_id===t.user_id;return e.jsx("circle",{cx:`${r}%`,cy:`${t.yPos}%`,r:s?6:3,fill:s?"#60a5fa":"#3b82f6",opacity:s?1:.6,className:"transition-all duration-200 cursor-pointer hover:opacity-100",onMouseEnter:c=>n(c,t),onMouseLeave:i,onClick:()=>window.location.hash=`#/user/${t.username}`},l)})]}),a&&(()=>{var j;const t=p(a.timestamp),l=a.yPos;let r={},s={},c="absolute z-50 pb-3 pointer-events-none";t<20?(r.left=`${t}%`,r.transform="translateX(-10px)",s.left="20px"):t>80?(r.left=`${t}%`,r.transform="translateX(calc(-100% + 10px))",s.right="20px"):(r.left=`${t}%`,r.transform="translateX(-50%)",s.left="50%",s.transform="translateX(-50%)");const b=l<30;return b?(r.top=`${l}%`,r.marginTop="15px",c=c.replace("pb-3","pt-3")):(r.top=`${l}%`,r.transform+=" translateY(-100%)"),e.jsx("div",{className:c,style:r,onMouseEnter:u,onMouseLeave:w,children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 p-3 rounded-lg shadow-2xl w-64 pointer-events-auto relative",children:[e.jsx("div",{className:`absolute w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent ${b?"border-b-[6px] border-b-slate-800 -top-[6px]":"border-t-[6px] border-t-slate-800 -bottom-[6px]"}`,style:s}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.profile_pic_url?e.jsx("img",{src:a.profile_pic_url,className:"w-8 h-8 rounded-full",alt:""}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-xs font-bold text-slate-400",children:(j=a.name)==null?void 0:j[0]}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("h4",{className:"text-slate-200 font-bold text-sm truncate",children:e.jsx(k,{text:a.name})}),e.jsxs("p",{className:"text-slate-500 text-xs",children:["@",a.username]})]})]}),e.jsx("div",{className:"text-slate-400 text-xs border-t border-slate-700 pt-2 mt-2 flex justify-between items-center",children:e.jsxs("span",{children:["Joined: ",e.jsx("span",{className:"text-slate-300",children:a.dateObj.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})]})}),e.jsx("a",{href:`#/user/${a.username}`,className:"mt-3 block w-full text-center bg-blue-600 hover:bg-blue-500 text-white text-xs font-medium py-1.5 rounded transition-colors",children:"View Profile"})]})})})()]})},A=()=>{const[o,a]=m.useState("All"),x=m.useMemo(()=>{const n=new Set(v.map(i=>i.account_based_in||"Unknown"));return["All",...Array.from(n).sort()]},[]),d=m.useMemo(()=>{let n=v.filter(i=>i.creation_date);return o!=="All"&&(o==="Unknown"?n=n.filter(i=>!i.account_based_in):n=n.filter(i=>i.account_based_in===o)),n.sort((i,u)=>new Date(i.creation_date)-new Date(u.creation_date))},[o]);return d.length===0&&o==="All"?e.jsx("div",{className:"h-full w-full bg-slate-950 p-8 flex items-center justify-center",children:e.jsx(y,{className:"text-slate-400",children:"No creation date data available in dataset."})}):e.jsxs("div",{className:"h-full w-full bg-slate-950 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-none p-6 md:p-10 pb-0 z-10 bg-slate-950 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-3xl text-slate-100",children:"Community Timeline"}),e.jsx(y,{className:"text-slate-400",children:"Chronological history of account creations."})]}),e.jsx("div",{className:"w-full md:w-64",children:e.jsx($,{value:o,onValueChange:a,children:x.map(n=>e.jsx(M,{value:n,children:n},n))})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 md:p-10 pt-6 pb-20",children:[e.jsx("div",{className:"w-full bg-slate-950 p-6 rounded-xl border border-slate-900/50 shadow-inner",children:e.jsx(D,{data:d})}),e.jsxs("div",{className:"mt-6 text-center text-slate-500 text-sm pb-10",children:["Hover over points to see user details. Showing ",d.length," accounts."]})]})]})};export{A as default};
